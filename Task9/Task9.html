<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pokemon API Test</title>
  <style>
    body {
      font-family: Arial;
      text-align: center;

    }
    select {
      margin-bottom: 10px;
    }
    img {
      width: 200px;
      height: 200px;
      cursor:pointer;
    }
    #info {
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h2>Pokemon list</h2>
  <label for="dropdown">Choose Pokemon:</label>
  <select id="dropdown">
    <option value="">- choose -</option>
  </select>

  <div>
    <img id="image" src="" alt="Pokemon picture" style="display:none;">
    <span id="noPicture">Choose something</span>
  </div>

  <div id="info"></div>

  <script>
    const dropdown = document.getElementById("dropdown");
    const image = document.getElementById("image");
    const info = document.getElementById("info");
    const noPicture = document.getElementById("noPicture");

    // loading list of pokemons
    fetch("https://pokeapi.co/api/v2/pokemon?limit=20")
      .then(function(response) {
        return response.json();
      })
      .then(function(data) {
        const pokemons = data.results;
        pokemons.forEach(function(pokemon) {
          const option = document.createElement("option");
          option.value = pokemon.url;
          option.textContent = pokemon.name;
          dropdown.appendChild(option);
        });
      })
      .catch(function() {
        info.textContent = "Error loading data.";
      });

    // when we choose a pokemon
    dropdown.addEventListener("change", function() {
      const url = this.value;
      if (url === "") {
        info.textContent = "";
        image.style.display = "none";
        noPicture.style.display = "inline";
        return;
      }

      fetch(url)
        .then(function(response) {
          return response.json();
        })
        .then(function(pokemon) {
          noPicture.style.display = "none";
          image.style.display = "inline";
          image.src = pokemon.sprites.front_default;

          // switching between front and back of the picture
          let showingFront = true;
          image.onclick = function() {
            if (showingFront) {
              image.src = pokemon.sprites.back_default;
              showingFront = false;
            } else {
              image.src = pokemon.sprites.front_default;
              showingFront = true;
            }
          };

          // showing information
          info.innerHTML = `
            <p><strong>Name:</strong> ${pokemon.name}</p>
            <p><strong>Height:</strong> ${pokemon.height}</p>
            <p><strong>Weight:</strong> ${pokemon.weight}</p>
            <p><strong>Base experience:</strong> ${pokemon.base_experience}</p>
            <p><strong>Abilities:</strong> ${pokemon.abilities.map(a => a.ability.name).join(", ")}</p>
          `;
        })
        .catch(function() {
          info.textContent = "Error loading Pokemon info.";
        });
    });
  </script>
</body>
</html>
